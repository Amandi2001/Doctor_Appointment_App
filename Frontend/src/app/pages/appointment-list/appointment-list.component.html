<html>
  <head>
    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <!-- Bootstrap Icons -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css"
      rel="stylesheet"
    />
  </head>

  <body class="py-4">
    <div class="container">
      <!-- Button Filter -->
      <div class="row mb-4">
        <div class="col-12 text-center">
          <div class="btn-group">
            <button
              type="button"
              [class]="
                activeBtnName == 'All'
                  ? 'btn btn-custom-active'
                  : 'btn btn-custom-outline'
              "
              (click)="getAllAppointment()"
            >
              All
            </button>
            <button
              type="button"
              [class]="
                activeBtnName == 'New'
                  ? 'btn btn-custom-active'
                  : 'btn btn-custom-outline'
              "
              (click)="getNewAppointment()"
            >
              New
            </button>
            <button
              type="button"
              [class]="
                activeBtnName == 'Done'
                  ? 'btn btn-custom-active'
                  : 'btn btn-custom-outline'
              "
              (click)="getDoneAppointment()"
            >
              Done
            </button>
          </div>
        </div>
      </div>

      <!-- Search Box -->
      <div class="row mb-3">
        <div class="col-md-6 offset-md-3">
          <input
            type="text"
            class="form-control"
            placeholder="Search appointments..."
            [(ngModel)]="searchTerm"
            (input)="onSearch()"
          />
        </div>
      </div>

      <!-- Appointment Table -->
      <div class="table-responsive">
        <table class="table table-striped table-bordered align-middle">
          <thead>
            <tr>
              <th>Patient Name</th>
              <th>Mobile No</th>
              <th>City</th>
              <th>Appointment ID</th>
              <th>Appointment Date</th>
              <th>Status</th>
              <th class="text-end">Action</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let item of filteredAppointments; index as i">
              <td>{{ item.patientName }}</td>
              <td>{{ item.mobileNo }}</td>
              <td>{{ item.city }}</td>
              <td>{{ item.appointmentId }}</td>
              <td>
                <i class="bi bi-calendar-date me-1"></i>
                {{ item.appointmentDate }}
              </td>
              <td>
                <span
                  [class]="
                    item.isDone
                      ? 'table-status-done'
                      : 'table-status-new'
                  "
                >
                  <i class="bi bi-check-circle me-1"></i>
                  {{ item.isDone ? 'Done' : 'New' }}
                </span>
              </td>
              <td class="text-end">
                <button
                  class="btn btn-sm action-btn"
                  (click)="onMarkDone(item.appointmentId)"
                >
                  Mark Done
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </body>
</html>
